angular.module("jkuri.touchspin",[]).directive("ngTouchSpin",["$timeout","$interval","$document",function(n,t,i){"use strict";var r={tab:9,left:37,up:38,right:39,down:40},u=function(n,t){n.min=parseFloat(t.min)||0;n.max=parseFloat(t.max)||100;n.step=parseFloat(t.step)||1;n.prefix=t.prefix||undefined;n.postfix=t.postfix||undefined;n.decimals=t.decimals||0;n.stepInterval=t.stepInterval||100;n.stepIntervalDelay=t.stepIntervalDelay||500;n.initval=t.initval||"";n.val=t.value||n.initval;n.verticalButtons=t.verticalButtons==="true"||!1};return{restrict:"EA",require:"?ngModel",scope:!0,replace:!0,link:function(f,e,o,s){u(f,o);var v=i.find("body"),a,h,c=f.val,l;s.$setViewValue(f.val);f.focused=!1;f.decrement=function(){c=f.val;var n=parseFloat(parseFloat(Number(f.val))-parseFloat(f.step)).toFixed(f.decimals);if(n<f.min){n=parseFloat(f.min).toFixed(f.decimals);f.val=n;s.$setViewValue(n);return}f.val=n;s.$setViewValue(n)};f.increment=function(){c=f.val;var n=parseFloat(parseFloat(Number(f.val))+parseFloat(f.step)).toFixed(f.decimals);n>f.max||(f.val=n,s.$setViewValue(n))};f.startSpinUp=function(){f.checkValue();f.increment();l=Date.now();f.stopSpin();n(function(){h=t(function(){f.increment()},f.stepInterval)},f.stepIntervalDelay)};f.startSpinDown=function(){f.checkValue();f.decrement();l=Date.now();var i=n(function(){h=t(function(){f.decrement()},f.stepInterval)},f.stepIntervalDelay)};f.stopSpin=function(){Date.now()-l>f.stepIntervalDelay?(n.cancel(a),t.cancel(h)):n(function(){n.cancel(a);t.cancel(h)},f.stepIntervalDelay)};f.checkValue=function(){var n;f.val===""||f.val.match(/^-?(?:\d+|\d*\.\d+)$/i)||(n=c!==""?parseFloat(c).toFixed(f.decimals):parseFloat(f.min).toFixed(f.decimals),f.val=n,s.$setViewValue(n));f.focused=!1};f.focus=function(){f.focused=!0};s.$render=function(){f.val=s.$viewValue};v.bind("keydown",function(n){var t=n.which;f.focused&&t!==r.tab&&(n.preventDefault(),t===r.right||t===r.up?f.increment():(t===r.left||t===r.down)&&f.decrement(),f.$apply())})},template:'<div class="input-group ng-touchspin">  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinDown()" ng-mouseup="stopSpin()"><i class="fa fa-minus"><\/i><\/button>  <\/span>  <span class="input-group-addon" ng-show="prefix" ng-bind="prefix"><\/span>  <input type="text" ng-model="val" class="form-control" ng-blur="checkValue()" ng-focus="focus()">  <span class="input-group-addon" ng-show="postfix" ng-bind="postfix"><\/span>  <span class="input-group-btn" ng-show="!verticalButtons">    <button class="btn btn-default" ng-mousedown="startSpinUp()" ng-mouseup="stopSpin()"><i class="fa fa-plus"><\/i><\/button>  <\/span>  <span class="input-group-btn-vertical" ng-hide="!verticalButtons">    <button class="btn btn-default ng-touchspin-up" ng-mousedown="startSpinUp()" ng-mouseup="stopSpin()" type="button"><i class="fa fa-plus"><\/i><\/button>    <button class="btn btn-default ng-touchspin-down" ng-mousedown="startSpinDown()" ng-mouseup="stopSpin()" type="button"><i class="fa fa-minus"><\/i><\/button>  <\/span><\/div>'}}]);